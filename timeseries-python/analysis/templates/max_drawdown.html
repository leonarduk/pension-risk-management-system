<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Max Drawdown</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<canvas id="maxDrawdownChart" width="400" height="300"></canvas>
<script>
fetch('/analytics/max-drawdown?tickers=AAPL,MSFT')
  .then(res => res.json())
  .then(data => {
      const ctx = document.getElementById('maxDrawdownChart').getContext('2d');
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: data.map(d => d.ticker),
          datasets: [{
            label: 'Max Drawdown',
            data: data.map(d => d.max_drawdown),
            backgroundColor: 'rgba(255, 99, 132, 0.6)'
          }]
        },
        options: {
          scales: {
            y: {
              title: { display: true, text: 'Max Drawdown' },
              ticks: { callback: v => (v * 100).toFixed(2) + '%' }
            }
          }
        }
      });
  });
</script>
</body>
</html>
